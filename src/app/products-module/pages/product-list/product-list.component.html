<h2 class="productsTitle">Products</h2>

<app-input-search (search)="onSearchEvent($event)"></app-input-search>

@let loading = productsFacade.loading$ | async;
@let error = productsFacade.error$ | async;
@let products = productsFacade.products$ | async;

@if (loading) {
  <div class="loading">Loading products...</div>
} @else if (error) {
  <p class="error">{{ error }}</p>
} @else if (products?.length) {
  <ul class="products">
    @for (product of products | filter: searchTerm: getProductKeys; track product.id) {
      <app-product-item
        [product]="product"
        (delete)="onDeleteProductEvent($event)">
      </app-product-item>
    }
  </ul>
} @else {
  <p class="empty">No products found.</p>
}
